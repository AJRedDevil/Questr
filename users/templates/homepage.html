{% extends "mainbase.html" %}
{% load staticfiles %}
{% load tz %}
{% block localhead %}
<link href={% static "css/feature.css" %} rel="stylesheet">
<link href={% static "css/star-rating.css" %} media="all" rel="stylesheet" type="text/css"/>

<script src={% static "js/star-rating.js" %} type="text/javascript"></script>
{% endblock localhead %}
{% block content %}
<!-- This is the main container (#scroll-container) -->
<div class="container-fluid">
<div class="row">
<div class="col-md-10 col-md-offset-1 column">
<div class="js-masonry" id="post-container" data-masonry-options='{ "columnWidth": 0, "itemSelector": ".post" }'>
   
        {% for quest in  allquests %}
        
        <div class="col-xs-6 col-sm-3 col-md-3 col-lg-3 column post">
        <div class="well shadows body-borders">
            {% if quest.item_images %}
            <a  href="/quest/{{quest.id}}"><img src={{quest.item_images}} class="item-image"></a>                  
            {% else %}    
            <a  href="/quest/{{quest.id}}" title="Title">
            <div class="no-image item-image">
	            <h1><span class="glyphicon glyphicon-picture"></span></h1>
            </div>
            </a>
            {% endif %}
                 
            <div class="item-content">
                <a  href="/quest/{{quest.id}}" class="image"><h6 class="title">{{quest.title | title}}</h6></a>

                <p>{{quest.description | truncatewords:10  }}</p>
                
           
           <div class="info">
                <div class="row clearfix">
	                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 column">
		                <hr>
		                <p class="grey">pay:</p>
                
                        {# only allow shippers to see addresses #}
                        {% if user.is_shipper == True %}
                            <p class="grey">From: {{quest.srcaddress}}</p>
                            <p class="grey">To: {{quest.dstaddress}}</p>
                        {% endif %}   
                	              
                      <p class="grey"><span class="glyphicon glyphicon-time"></span>{% localtime on%} {{quest.creation_date | timesince }} {% endlocaltime %} ago</p>
                </div>
	                </div>
                <hr>
                <div class="row clearfix">
                	<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 column">
	                	<a href="/user/{{quest.questrs.displayname}}">
                			<div class="ratio img-responsive img-circle" style="background-image: url({{user.avatar_file_name}});"></div>
	                	</a>
                	</div><!-- column -->
                	<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 column">
                		<a href="/user/{{quest.questrs.displayname}}"><p>{{quest.questrs.first_name}} {{quest.questrs.last_name}}</p></a>
                		<input id="input-21e" value="{{final_rating}}" type="number" class="rating" min=0 max=5 step=0.5 data-size="xl" data-readonly="true" data-show-clear="false" data-show-caption="true" >
                	</div><!-- column -->
                </div><!-- ./row -->
                </div><!-- ./info -->       
            
            </div><!-- End of item-content -->   
	    </div><!-- ./feature -->
        </div><!-- ./item -->
        

       {% endfor %}           
</div><!-- ./post-container -->
</div><!-- ./column -->       
</div><!-- ./row -->
</div><!-- ./container -->
{% comment %}
<div id="pages">
    <a href="index.html"></a>
    <a href="loadpage/page2.html"></a>
    <a href="loadpage/page3.html"></a>
    <a href="loadpage/page4.html"></a>
    <a href="loadpage/page5.html"></a>
    <a href="loadpage/page6.html"></a>
</div>
{% endcomment %}
{% endblock content %}
{% block scripts %}
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
   <script src={% static 'js/libs/masonry.pkgd.min.js' %}></script>
   <script>
	   var container = document.querySelector('#post-container');
		var msnry = new Masonry( post-container, {
		  // options
		  columnWidth: 0,
		  itemSelector: '.post'
		});
   </script>
    
    {% comment %}
    ## This is for google plus based authentication ##
           <script type="text/javascript">
               (function () {
                   var po = document.createElement('script');
                   po.type = 'text/javascript';
                   po.async = true;
                   po.src = 'https://plus.google.com/js/client:plusone.js?onload=start';
                   var s = document.getElementsByTagName('script')[0];
                   s.parentNode.insertBefore(po, s);
               })();
           </script>           
    {% endcomment %}

{% endblock scripts %}